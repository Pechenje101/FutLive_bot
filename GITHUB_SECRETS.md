# üîê GitHub Secrets Configuration

–≠—Ç–æ—Ç —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –≤—Å–µ—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö Secrets –¥–ª—è GitHub Actions.

## üìã –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö Secrets

| Secret Name | –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|------------|:----------:|----------|---------|
| `VPS_HOST` | ‚úÖ | IP –∞–¥—Ä–µ—Å VPS —Å–µ—Ä–≤–µ—Ä–∞ | `123.45.67.89` |
| `VPS_USER` | ‚úÖ | SSH –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å | `ubuntu` |
| `VPS_PORT` | ‚úÖ | SSH –ø–æ—Ä—Ç | `22` |
| `VPS_SSH_KEY` | ‚úÖ | –ü—Ä–∏–≤–∞—Ç–Ω—ã–π SSH –∫–ª—é—á | (—Å–º. –Ω–∏–∂–µ) |
| `SLACK_WEBHOOK` | ‚ùå | Webhook –¥–ª—è Slack —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π | `https://hooks.slack.com/...` |

## üîë –®–∞–≥ 1: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è SSH –∫–ª—é—á–µ–π

### –ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ

```bash
# –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –Ω–æ–≤—É—é –ø–∞—Ä—É –∫–ª—é—á–µ–π (–µ—Å–ª–∏ –µ—â–µ –Ω–µ—Ç)
ssh-keygen -t rsa -b 4096 -f ~/.ssh/github_deploy -N ""

# –ü—Ä–æ—Å–º–æ—Ç—Ä–∏–º –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á (–¥–ª—è GitHub Secret)
cat ~/.ssh/github_deploy

# –ü—Ä–æ—Å–º–æ—Ç—Ä–∏–º –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á (–¥–ª—è VPS)
cat ~/.ssh/github_deploy.pub
```

### –ù–∞ VPS —Å–µ—Ä–≤–µ—Ä–µ

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ VPS
ssh root@YOUR_VPS_IP

# –î–æ–±–∞–≤—å—Ç–µ –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á
mkdir -p ~/.ssh
echo "YOUR_PUBLIC_KEY_CONTENT" >> ~/.ssh/authorized_keys
chmod 700 ~/.ssh
chmod 600 ~/.ssh/authorized_keys

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç
exit
ssh -i ~/.ssh/github_deploy ubuntu@YOUR_VPS_IP
```

## üîê –®–∞–≥ 2: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ Secrets –≤ GitHub

### –°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å GitHub

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ GitHub
2. Settings ‚Üí Secrets and variables ‚Üí Actions
3. –ù–∞–∂–º–∏—Ç–µ "New repository secret"
4. –î–æ–±–∞–≤—å—Ç–µ –∫–∞–∂–¥—ã–π Secret:

#### Secret 1: VPS_HOST

```
Name: VPS_HOST
Value: 123.45.67.89
```

#### Secret 2: VPS_USER

```
Name: VPS_USER
Value: ubuntu
```

#### Secret 3: VPS_PORT

```
Name: VPS_PORT
Value: 22
```

#### Secret 4: VPS_SSH_KEY

```
Name: VPS_SSH_KEY
Value: (—Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ ~/.ssh/github_deploy)
```

**–í–∞–∂–Ω–æ:** –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤–µ—Å—å –∫–æ–Ω—Ç–µ–Ω—Ç –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞, –≤–∫–ª—é—á–∞—è:
```
-----BEGIN RSA PRIVATE KEY-----
MIIEpAIBAAKCAQEA...
...
-----END RSA PRIVATE KEY-----
```

#### Secret 5: SLACK_WEBHOOK (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

```
Name: SLACK_WEBHOOK
Value: https://hooks.slack.com/services/YOUR/WEBHOOK/URL
```

### –°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ GitHub CLI

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ GitHub CLI
# https://cli.github.com/

# –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å
gh auth login

# –î–æ–±–∞–≤—å—Ç–µ Secrets
gh secret set VPS_HOST --body "123.45.67.89"
gh secret set VPS_USER --body "ubuntu"
gh secret set VPS_PORT --body "22"
gh secret set VPS_SSH_KEY < ~/.ssh/github_deploy
gh secret set SLACK_WEBHOOK --body "https://hooks.slack.com/..."
```

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ Secrets

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö Secrets
gh secret list
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

–ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è Secrets, GitHub Actions –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º push.

–ß—Ç–æ–±—ã –≤—Ä—É—á–Ω—É—é –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:

```bash
# –ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ
ssh -i ~/.ssh/github_deploy -p 22 ubuntu@YOUR_VPS_IP

# –ï—Å–ª–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ, –∑–Ω–∞—á–∏—Ç –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

1. **–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ Secrets –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**
   ```bash
   # –î–æ–±–∞–≤—å—Ç–µ –≤ .gitignore
   echo ".env" >> .gitignore
   echo "*.pem" >> .gitignore
   echo "*.key" >> .gitignore
   ```

2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–∞–∑–Ω—ã–µ –∫–ª—é—á–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π**
   - Development: –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–ª—é—á
   - Production: –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–ª—é—á

3. **–†–µ–≥—É–ª—è—Ä–Ω–æ —Ä–æ—Ç–∏—Ä—É–π—Ç–µ –∫–ª—é—á–∏**
   ```bash
   # –ö–∞–∂–¥—ã–µ 3-6 –º–µ—Å—è—Ü–µ–≤ –≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –Ω–æ–≤—ã–µ –∫–ª—é—á–∏
   ssh-keygen -t rsa -b 4096 -f ~/.ssh/github_deploy_new
   ```

4. **–û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –¥–æ—Å—Ç—É–ø SSH –∫–ª—é—á–∞**
   ```bash
   # –ù–∞ VPS - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ ssh-keygen —Å –æ–ø—Ü–∏—è–º–∏
   ssh-keygen -t rsa -b 4096 -C "github-actions" -f ~/.ssh/github_deploy
   ```

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### GitHub Actions –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ VPS

**–û—à–∏–±–∫–∞:** `Permission denied (publickey)`

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –¥–æ–±–∞–≤–ª–µ–Ω –Ω–∞ VPS
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ —Ñ–∞–π–ª: `chmod 600 ~/.ssh/authorized_keys`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `VPS_SSH_KEY` —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á (–Ω–µ –ø—É–±–ª–∏—á–Ω—ã–π)

### SSH –∫–ª—é—á –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ

**–û—à–∏–±–∫–∞:** `Permission denied`

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ –∫–ª—é—á
chmod 600 ~/.ssh/github_deploy

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
chmod 700 ~/.ssh

# –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è —Å verbose
ssh -vvv -i ~/.ssh/github_deploy ubuntu@YOUR_VPS_IP
```

### Secrets –Ω–µ –≤–∏–¥–Ω—ã –≤ workflow

**–û—à–∏–±–∫–∞:** `${{ secrets.VPS_HOST }}` –Ω–µ –∑–∞–º–µ–Ω—è–µ—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Secret –¥–æ–±–∞–≤–ª–µ–Ω –≤ Settings ‚Üí Secrets
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ—á–Ω–æ–µ –∏–º—è Secret (—á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –∫ —Ä–µ–≥–∏—Å—Ç—Ä—É)
3. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É GitHub

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ GitHub Actions
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å–µ Secrets –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ
3. –°–æ–∑–¥–∞–π—Ç–µ Issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏

## üéâ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å –≤–∞—à–∏ Secrets –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –∏ GitHub Actions –º–æ–∂–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞—Ç—å –Ω–∞ VPS!
